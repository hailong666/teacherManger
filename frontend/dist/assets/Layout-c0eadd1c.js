import{u as J,a as K,b as P,r as Q,c as W,o as X,d as o,e as r,f as w,g as e,w as t,h as _,i as a,j as u,F as b,k as R,l as m,m as c,n as Y,s as Z,p as B,t as ee,E as te,q as ne}from"./main-34d96914.js";import{_ as oe}from"./_plugin-vue_export-helper-c27b6911.js";const le={class:"layout-container"},ae={class:"header-left"},se={class:"header-right"},de={class:"user-dropdown"},ue={class:"username"},re={__name:"Layout",setup(ie){const C=J(),f=K(),s=P(),p=Q(!1),S=()=>{p.value=!p.value},h=W(()=>"/"+C.path.split("/")[1]),E=i=>{f.push(i)},F=()=>{te.confirm("确定要退出登录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{await ne(),s.logout(),f.push("/login")}catch(i){console.error("登出失败:",i),s.logout(),f.push("/login")}}).catch(()=>{})};return X(async()=>{if(s.token&&!s.userInfo)try{await s.getUserInfo()}catch(i){console.error("获取用户信息失败:",i),s.logout(),f.push("/login")}}),(i,n)=>{const I=o("Odometer"),l=o("el-icon"),d=o("el-menu-item"),x=o("Calendar"),M=o("Microphone"),g=o("User"),L=o("Star"),N=o("Document"),T=o("el-menu"),U=o("el-aside"),V=o("Fold"),D=o("Expand"),O=o("el-avatar"),y=o("el-dropdown-item"),j=o("SwitchButton"),q=o("el-dropdown-menu"),z=o("el-dropdown"),$=o("el-header"),A=o("router-view"),G=o("el-main"),H=o("el-container");return r(),w("div",le,[e(U,{width:"auto",class:"sidebar-container"},{default:t(()=>[n[17]||(n[17]=_("div",{class:"logo-container"},[_("h1",{class:"logo-title"},"语文教学管理系统")],-1)),e(T,{"default-active":h.value,class:"sidebar-menu",collapse:p.value,router:"","background-color":"#304156","text-color":"#bfcbd9","active-text-color":"#409EFF"},{default:t(()=>[e(d,{index:"/dashboard"},{title:t(()=>[...n[1]||(n[1]=[a("首页",-1)])]),default:t(()=>[e(l,null,{default:t(()=>[e(I)]),_:1})]),_:1}),u(s).hasRole("teacher")||u(s).hasRole("admin")?(r(),w(b,{key:0},[e(d,{index:"/attendance"},{title:t(()=>[...n[2]||(n[2]=[a("学生签到",-1)])]),default:t(()=>[e(l,null,{default:t(()=>[e(x)]),_:1})]),_:1}),e(d,{index:"/classroom-attendance"},{title:t(()=>[...n[3]||(n[3]=[a("教室签到",-1)])]),default:t(()=>[e(l,null,{default:t(()=>[e(x)]),_:1})]),_:1}),e(d,{index:"/whiteboard-attendance"},{title:t(()=>[...n[4]||(n[4]=[a("希沃白板签到",-1)])]),default:t(()=>[e(l,null,{default:t(()=>[e(u(R))]),_:1})]),_:1})],64)):m("",!0),u(s).hasRole("student")?(r(),c(d,{key:1,index:"/student-attendance"},{title:t(()=>[...n[5]||(n[5]=[a("我的签到",-1)])]),default:t(()=>[e(l,null,{default:t(()=>[e(x)]),_:1})]),_:1})):m("",!0),e(d,{index:"/recitation"},{title:t(()=>[...n[6]||(n[6]=[a("背诵打卡",-1)])]),default:t(()=>[e(l,null,{default:t(()=>[e(M)]),_:1})]),_:1}),u(s).hasRole("teacher")||u(s).hasRole("admin")?(r(),c(d,{key:2,index:"/article-stats"},{title:t(()=>[...n[7]||(n[7]=[a("课文统计",-1)])]),default:t(()=>[e(l,null,{default:t(()=>[e(u(Y))]),_:1})]),_:1})):m("",!0),u(s).hasRole("teacher")||u(s).hasRole("admin")?(r(),c(d,{key:3,index:"/random-call"},{title:t(()=>[...n[8]||(n[8]=[a("随机点名",-1)])]),default:t(()=>[e(l,null,{default:t(()=>[e(g)]),_:1})]),_:1})):m("",!0),e(d,{index:"/points"},{title:t(()=>[...n[9]||(n[9]=[a("班级积分",-1)])]),default:t(()=>[e(l,null,{default:t(()=>[e(L)]),_:1})]),_:1}),e(d,{index:"/homework"},{title:t(()=>[...n[10]||(n[10]=[a("电子作业",-1)])]),default:t(()=>[e(l,null,{default:t(()=>[e(N)]),_:1})]),_:1}),e(d,{index:"/profile"},{title:t(()=>[...n[11]||(n[11]=[a("个人中心",-1)])]),default:t(()=>[e(l,null,{default:t(()=>[e(g)]),_:1})]),_:1}),u(s).hasRole("admin")?(r(),w(b,{key:4},[e(d,{index:"/class-management"},{title:t(()=>[...n[12]||(n[12]=[a("班级管理",-1)])]),default:t(()=>[e(l,null,{default:t(()=>[e(u(Z))]),_:1})]),_:1}),e(d,{index:"/user-management"},{title:t(()=>[...n[13]||(n[13]=[a("用户管理",-1)])]),default:t(()=>[e(l,null,{default:t(()=>[e(g)]),_:1})]),_:1}),e(d,{index:"/role-management"},{title:t(()=>[...n[14]||(n[14]=[a("角色管理",-1)])]),default:t(()=>[e(l,null,{default:t(()=>[e(u(B))]),_:1})]),_:1}),e(d,{index:"/article-management"},{title:t(()=>[...n[15]||(n[15]=[a("课文管理",-1)])]),default:t(()=>[e(l,null,{default:t(()=>[e(u(R))]),_:1})]),_:1})],64)):m("",!0),e(d,{index:"/role-test"},{title:t(()=>[...n[16]||(n[16]=[a("角色测试",-1)])]),default:t(()=>[e(l,null,{default:t(()=>[e(u(B))]),_:1})]),_:1})]),_:1},8,["default-active","collapse"])]),_:1}),e(H,{class:"main-container"},{default:t(()=>[e($,{class:"header"},{default:t(()=>[_("div",ae,[e(l,{class:"toggle-sidebar",onClick:S},{default:t(()=>[p.value?(r(),c(D,{key:1})):(r(),c(V,{key:0}))]),_:1})]),_("div",se,[e(z,{trigger:"click"},{dropdown:t(()=>[e(q,null,{default:t(()=>[e(y,{onClick:n[0]||(n[0]=v=>E("/profile"))},{default:t(()=>[e(l,null,{default:t(()=>[e(g)]),_:1}),n[18]||(n[18]=a("个人中心 ",-1))]),_:1}),e(y,{divided:"",onClick:F},{default:t(()=>[e(l,null,{default:t(()=>[e(j)]),_:1}),n[19]||(n[19]=a("退出登录 ",-1))]),_:1})]),_:1})]),default:t(()=>{var v,k;return[_("span",de,[e(O,{size:32,src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}),_("span",ue,ee(((v=u(s).userInfo)==null?void 0:v.real_name)||((k=u(s).userInfo)==null?void 0:k.name)||"用户"),1)])]}),_:1})])]),_:1}),e(G,{class:"main-content"},{default:t(()=>[e(A)]),_:1})]),_:1})])}}},ce=oe(re,[["__scopeId","data-v-74dba076"]]);export{ce as default};
