import{a as w,u as V,b as k,r as p,v as L,d as n,e as R,f as h,h as i,g as s,w as l,L as q,i as B,y as _}from"./main-34d96914.js";import{_ as C}from"./_plugin-vue_export-helper-c27b6911.js";const F={class:"login-container"},N={class:"login-box"},U={__name:"Login",setup(E){const g=w(),f=V(),v=k(),d=p(null),a=p(!1),r=L({username:"",password:""}),y={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}]},m=()=>{d.value.validate(async c=>{var e,t;if(c){a.value=!0;try{await v.login(r),_.success("登录成功");const o=f.query.redirect||"/";g.push(o)}catch(o){_.error(((t=(e=o.response)==null?void 0:e.data)==null?void 0:t.message)||"登录失败，请检查用户名和密码")}finally{a.value=!1}}})};return(c,e)=>{const t=n("el-input"),o=n("el-form-item"),b=n("el-button"),x=n("el-form");return R(),h("div",F,[i("div",N,[e[3]||(e[3]=i("div",{class:"login-title"},[i("h2",null,"语文教学管理系统")],-1)),s(x,{model:r,rules:y,ref_key:"loginFormRef",ref:d,class:"login-form"},{default:l(()=>[s(o,{prop:"username"},{default:l(()=>[s(t,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=u=>r.username=u),placeholder:"用户名","prefix-icon":"el-icon-user"},null,8,["modelValue"])]),_:1}),s(o,{prop:"password"},{default:l(()=>[s(t,{modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=u=>r.password=u),type:"password",placeholder:"密码","prefix-icon":"el-icon-lock",onKeyup:q(m,["enter"])},null,8,["modelValue"])]),_:1}),s(o,null,{default:l(()=>[s(b,{loading:a.value,type:"primary",class:"login-button",onClick:m},{default:l(()=>[...e[2]||(e[2]=[B("登录",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])])}}},I=C(U,[["__scopeId","data-v-4261d2be"]]);export{I as default};
