import{b as I,d as b,e as r,f as u,h as e,i as l,t as n,j as o,l as i,g as y,w as R,y as a}from"./main-2e31a8b5.js";import{_ as C}from"./_plugin-vue_export-helper-c27b6911.js";const T={class:"role-test"},N={class:"user-info"},V={class:"role-permissions"},w={class:"menu-access"},B={key:0},S={key:1},U={key:2},j={key:3},E={key:4},D={class:"test-actions"},M={__name:"RoleTest",setup(h){const t=I(),k=async()=>{try{await t.getUserInfo(),a.success("用户信息刷新成功")}catch(d){a.error("刷新用户信息失败: "+d.message)}},v=()=>{t.logout(),a.success("已退出登录")};return(d,s)=>{var m,g,f,_;const p=b("el-button");return r(),u("div",T,[s[15]||(s[15]=e("h2",null,"角色权限测试页面",-1)),e("div",N,[s[5]||(s[5]=e("h3",null,"当前用户信息",-1)),e("p",null,[s[0]||(s[0]=e("strong",null,"用户名:",-1)),l(" "+n(((m=o(t).userInfo)==null?void 0:m.username)||"未登录"),1)]),e("p",null,[s[1]||(s[1]=e("strong",null,"姓名:",-1)),l(" "+n(((g=o(t).userInfo)==null?void 0:g.real_name)||((f=o(t).userInfo)==null?void 0:f.name)||"未登录"),1)]),e("p",null,[s[2]||(s[2]=e("strong",null,"角色:",-1)),l(" "+n(o(t).userRole||"未登录"),1)]),e("p",null,[s[3]||(s[3]=e("strong",null,"权限:",-1)),l(" "+n(((_=o(t).permissions)==null?void 0:_.map(x=>x.name).join(", "))||"无权限"),1)]),e("p",null,[s[4]||(s[4]=e("strong",null,"Token:",-1)),l(" "+n(o(t).token?"已设置":"未设置"),1)])]),e("div",V,[s[9]||(s[9]=e("h3",null,"角色权限检查",-1)),e("p",null,[s[6]||(s[6]=e("strong",null,"是否为学生:",-1)),l(" "+n(o(t).hasRole("student")?"是":"否"),1)]),e("p",null,[s[7]||(s[7]=e("strong",null,"是否为教师:",-1)),l(" "+n(o(t).hasRole("teacher")?"是":"否"),1)]),e("p",null,[s[8]||(s[8]=e("strong",null,"是否为管理员:",-1)),l(" "+n(o(t).hasRole("admin")?"是":"否"),1)])]),e("div",w,[s[11]||(s[11]=e("h3",null,"菜单访问权限",-1)),e("ul",null,[s[10]||(s[10]=e("li",null,"首页: 所有用户可访问",-1)),o(t).hasRole("student")?(r(),u("li",B,"学生签到: 学生可访问 ✓")):i("",!0),o(t).hasRole("teacher")?(r(),u("li",S,"考勤管理: 教师可访问 ✓")):i("",!0),o(t).hasRole("teacher")?(r(),u("li",U,"背诵打卡: 教师可访问 ✓")):i("",!0),o(t).hasRole("teacher")?(r(),u("li",j,"积分管理: 教师可访问 ✓")):i("",!0),o(t).hasRole("admin")?(r(),u("li",E,"系统管理: 管理员可访问 ✓")):i("",!0)])]),e("div",D,[s[14]||(s[14]=e("h3",null,"测试操作",-1)),y(p,{onClick:k},{default:R(()=>[...s[12]||(s[12]=[l("刷新用户信息",-1)])]),_:1}),y(p,{onClick:v,type:"danger"},{default:R(()=>[...s[13]||(s[13]=[l("退出登录",-1)])]),_:1})])])}}},A=C(M,[["__scopeId","data-v-1b1a1974"]]);export{A as default};
