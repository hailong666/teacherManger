# 角色权限功能测试说明

## 测试目的
验证前端应用是否正确实现了基于用户角色的权限控制，确保不同角色用户看到不同的菜单和功能。

## 测试账号

### 学生账号
- 用户名: `student01`
- 密码: `123456`
- 角色: `student`
- 姓名: 刘轩玮

### 教师账号
- 用户名: `teacher1`
- 密码: `123456`
- 角色: `teacher`
- 姓名: 张老师

## 测试步骤

### 1. 学生角色测试

1. 打开浏览器访问: http://localhost:3000
2. 使用学生账号登录 (student01/123456)
3. 登录成功后，观察侧边栏菜单，应该看到:
   - ✅ 首页
   - ✅ 学生签到 (仅学生可见)
   - ✅ 个人中心
   - ✅ 角色测试
   - ❌ 考勤管理 (教师专用，不应显示)
   - ❌ 背诵打卡 (教师专用，不应显示)
   - ❌ 积分管理 (教师专用，不应显示)

4. 点击「角色测试」菜单，验证:
   - 用户信息显示正确 (student01, 刘轩玮, student)
   - 角色权限检查显示「是否为学生: 是」
   - 菜单访问权限只显示「学生签到: 学生可访问 ✓」

5. 尝试直接访问教师页面 (在地址栏输入):
   - http://localhost:3000/attendance (应该被拦截或重定向)
   - http://localhost:3000/recitation (应该被拦截或重定向)
   - http://localhost:3000/points (应该被拦截或重定向)

### 2. 教师角色测试

1. 点击右上角退出登录
2. 使用教师账号登录 (teacher1/123456)
3. 登录成功后，观察侧边栏菜单，应该看到:
   - ✅ 首页
   - ✅ 考勤管理 (仅教师可见)
   - ✅ 背诵打卡 (仅教师可见)
   - ✅ 积分管理 (仅教师可见)
   - ✅ 个人中心
   - ✅ 角色测试
   - ❌ 学生签到 (学生专用，不应显示)

4. 点击「角色测试」菜单，验证:
   - 用户信息显示正确 (teacher1, 张老师, teacher)
   - 角色权限检查显示「是否为教师: 是」
   - 菜单访问权限显示教师相关功能:
     - 考勤管理: 教师可访问 ✓
     - 背诵打卡: 教师可访问 ✓
     - 积分管理: 教师可访问 ✓

5. 尝试直接访问学生页面:
   - http://localhost:3000/student-attendance (应该被拦截或重定向)

### 3. 路由权限测试

1. 在未登录状态下，尝试直接访问任何需要认证的页面
2. 应该被重定向到登录页面
3. 登录后应该能正常访问有权限的页面

## 预期结果

### 学生登录后应该看到的菜单:
```
首页
学生签到
个人中心
角色测试
```

### 教师登录后应该看到的菜单:
```
首页
考勤管理
背诵打卡
积分管理
个人中心
角色测试
```

## 技术实现要点

1. **用户状态管理**: 使用 Pinia store 管理用户信息和角色
2. **路由守卫**: 在 router/index.js 中实现基于角色的路由权限检查
3. **菜单渲染**: 在 Layout.vue 中使用 `v-if` 条件渲染基于角色的菜单项
4. **API 权限**: 后端 API 也应该验证用户角色权限

## 故障排除

如果角色权限不生效，检查:
1. 用户 store 是否正确获取和存储用户角色信息
2. 路由守卫是否正确实现角色检查逻辑
3. 菜单组件是否正确使用角色判断条件
4. API 调用是否正确传递认证 token

## 测试完成标准

- ✅ 不同角色用户看到不同的菜单项
- ✅ 角色权限检查功能正常
- ✅ 路由守卫正确拦截无权限访问
- ✅ 用户信息正确显示
- ✅ 登录/登出功能正常